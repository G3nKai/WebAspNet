# backend retake
 
Описание задания

Введение
В данном задании необходимо реализовать систему кампусных курсов (факультативы для студентов).

Требования, макеты и функционал
Документация API - https://camp-courses.api.kreosoft.space/swagger/index.html 


Диаграмма классов предметной области: https://docs.google.com/document/d/1Cw18f_kJNisAKLHqAZqdloJdWMk_pc1u-da55kUFQJg/edit?tab=t.0

В системе реализована авторизация и работа с API по JWT токену. Помимо этого, присутствует примитивная ролевая система для изоляции некоторого функционала. В системе присутствуют 2 базовых роли:
Рядовой пользователь
Администратор
Помимо этого, любой пользователь, независимо от базовой роли может быть также либо студентом кампусного курса, либо преподавателем. Данная “ответственность” реализуется при помощи связи между сущностями и может быть динамичной.
Данные для входа под админом:
Email - gymboss@gachi.com
Пароль: B0yNextD00r
Описание макетов и предусмотренного на страницах функционала пользователей
Главная страница
Это страница, которая открывается по умолчанию при переходе по адресу http://localhost



В системе нет функционала, который был бы доступен неавторизованному пользователю, поэтому все будет завязано на регистрации и процессе авторизации.
Хедеры
Вариаций всего 2:
Для неавторизованного пользователя

Для авторизованного пользователя
Не записанным ни на один курс и не являющийся преподавателем курса(ов)

Являющимся студентом курса(ов)

Являющийся преподавателем курса(ов)

Ккккккомбо

Регистрация


Адрес, который должен быть у вас в адресной строке при открытии страницы регистрации: http://localhost/registration/
По данному адресу нужно отправить POST запрос с необходимыми данными. В ответ будет отправлен TOKEN авторизации зарегистрированного пользователя (если регистрация прошла успешно).
Авторизация


Адрес, который должен быть у вас в адресной строке при открытии страницы авторизации: http://localhost/login/
По данному адресу нужно отправить POST запрос с необходимыми данными. В ответ будет отправлен TOKEN авторизации зарегистрированного пользователя (если авторизация прошла успешно).
Для авторизации нужно использовать email как логин. ВАЖНО: после авторизации, также нужно отправить запрос на получение роли пользователя с использованием полученного токена.
Профиль

Авторизованный пользователь может отредактировать свое ФИО и дату рождения.
Страница должна быть доступна по адресу: http://localhost/profile

Страница “Группа курсов”
Данная страница содержит список всех созданных групп кампусных курсов. Она должна иметь различный вид, в зависимости от базовой роли пользователя. Для администратора она будет выглядеть следующим образом:

Для администратора доступен функционал для CRUD групп кампусных курсов. При выполнении операции создания или редактирования должно открываться модальное окно с текстовым полем ввода / изменения названия группы. Название группы не должно быть пустым!



После отправки запроса на создание или редактирование группы, в зависимости от статуса ответа нужно показать пользователю соответствующее уведомление. Для уведомлений можно использовать дополнительные библиотеки, например: https://sweetalert.js.org/
https://codeseven.github.io/toastr/demo.html

Страница групп курсов для рядового пользователя будет иметь следующий вид:



В обоих случаях, клик на название группы должно переадресовать на страницу списка кампусных курсов для группы
Страница списка групп должна быть доступна по адресу http://localhost/groups/ 

Страница со списком курсов для группы
Страница должна быть доступна по адресу http://localhost/groups/{id}, где id - идентификатор группы.
Внешний вид данной страницы также будет немного отличаться в зависимости от базовой роли авторизованного пользователя. Для рядового пользователя страница будет иметь следующий вид:


На странице показан список курсов с отображением основных данных о курсе, цветом выделены статусы курса.

Единственное отличие для администратора будет в том, что под названием группы будет доступна кнопка создания нового курса:


При клике на кнопку создания курса должно открыться модальное окно с формой заполнения основных данных о курсе:


Поля “название”, “аннотация”, “требования”, “год начала”, “общее количество мест”, “основной преподаватель” должны быть заполнены. Должен быть указан семестр.
После создания нового курса у администратора список курсов группы должен обновиться!

Страницы “Мои курсы” и “Преподаваемые курсы”
По внешнему виду данные страницы не будут отличаться от списка курсов группы, такое же перечисление курсов, по клику на курс переадресация на страницу деталей курса.
Страница “Мои курсы” должна быть доступна по ссылке: http://localhost/courses/my/
Страница “Преподаваемые курсы” должна быть доступна по ссылке: http://localhost/courses/teaching/

Страница деталей курса
Данная страница является основной для всей системы, в ней будет происходить наибольшая часть взаимодействия с пользователем.

Страница должна быть доступна по ссылке: http://localhost/courses/{id}, где {id} - идентификатор курса.

Общая информация о курсе
Как и в предыдущих случаях, страница будет иметь различный вид для пользователей с различными ролями. Для администратора и преподавателя страница будет иметь следующий вид:


На данной странице отображаются все детали курса, есть также несколько вычисляемых полей, которые необходимо заполнить на основании списка полученных студентов курса:
Студентов зачислено (статус студента “Принят в группу”)
Заявок на рассмотрении (статус “В очереди”)

Присутствуют две панели со вкладками:
Первая - основная информация о курсе и уведомления
Вторая - список преподавателей и студентов курса

Для примера ниже приведены скриншоты разных вкладок:
Вкладка “Преподаватели”

	Вкладка “Уведомления”

	Как можно заметить, на вкладке с уведомлениями цветом выделено уведомление с высокой важностью. 


На странице деталей курса, для преподавателя и администратора доступен такой функционал как:
Редактирование основных деталей курса


ВАЖНО: Для администратора модальное окно редактирования будет отличаться, вид будет аналогичен модальному окну создания курса!

Изменение статуса курса

Обратите внимание! В системе предусмотрено выставление только последующих статусов (например, если у курса уже вставлен статус “Завершен” ему нельзя выставить статус “Открыт для записи” или “В процессе”)
Создание уведомления
Текст уведомления не должен быть пустым!



Добавление преподавателя на курс

ВАЖНО: кнопка добавления преподавателя должна быть доступна только администратору и основному преподавателю курса

Вкладка со студентами курса:


Для преподавателя и администратора на данной вкладке отображается список студентов со всеми возможными статусами. В зависимости от статуса отображение отличается.
Для студентов, которые находятся в очереди, отображаются кнопки для принятия в группу или отклонения заявки.
Обратите внимание! Принять студента на курс возможно только при условии, что на курсе еще не достигнуто максимальное количество студентов. Размер очереди для записи на курс не имеет ограничений.
 Для студентов, которые были отклонены ничего не отображается.
Для студентов, которые были зачислены в группу отображаются результаты промежуточной и финальной аттестации.
При клике на название аттестации (выглядит как ссылка) должно открыться модальное окно для редактирования оценки студента:


Теперь рассмотрим внешний вид страницы деталей курса со стороны студента:

Тут может быть несколько вариантов:
Если пользователь не был записан на курс

Если пользователь не был записан на курс и статус курса “Открыт для записи” должна быть доступна кнопка “Записаться на курс”.
Обратите внимание!  Если пользователь является преподавателем курса, он не имеет возможности записаться на курс в роли студента.
	ВАЖНО: независимо, был ли студент записан на курс или нет, в списке студентов он должен видеть ТОЛЬКО студентов, которые уже зачислены на курс, но не должен видеть их оценок. Если студент был зачислен на текущий курс, он должен видеть ТОЛЬКО свои оценки:
 


Генерация отчёта backend

В отчете необходимо вернуть в формате json следующую информацию для отображения в таблице. Колонка отчета - это группа кампусных курсов (с возможностью фильтрации по ним), строка отчета - преподаватель. На пересечении два значения среднее количество студентов сдавших/не сдавших (FinalResult = Passed/Failed) курс, среди курсов данной группы курсов у которых преподаватель является главным.
Также необходимо предусмотреть опциональную фильтрацию по семестру проведения курсов. Строки упорядочиваются по имени преподавателя.
Дополнительная информация по заданию
Представленные в задании скриншоты страниц стоит расценивать больше как пример UX, но не UI, для визуального компонента системы вы вольны использовать любой фреймворк, который вы больше предпочитаете, например:
Ant Design
React Bootstrap
Semantic UI
CoreUI
MUI
	
	Также, что касается ролевой системы, есть некоторые ограничения:
Пользователь, который записан на курс как студент, не может быть назначен как преподаватель этого же курса
Пользователь, который был назначен как преподаватель курса не может записаться на курс как студент

	Также, для всех операций, связанных с удалением сущностей, после нажатия на кнопку удаления должен выводится popup с подтверждением удаления. Данный popup можно реализовать самому, можно использовать инструменты из сторонних библиотек.
Backend
Для взаимодействия приложения с БД обязательно использование ORM Entity Framework (для .Net направления)!
Список курсов
Для данного endpoint’а присутствует механизм фильтрации и сортировки курсов по нескольким критериям, которые могут быть скомбинированы между собой:
Поиск по названию курса
Фильтрация по доступности курса: доступен для записи 
Курс доступен для записи, если не превышено максимальное количество студентов, и он имеет статус “Открыт для записи”
Фильтр по семестру: осень, весна
Сортировка курсов (по дате создания (сначала новые), по дате создания (сначала старые))
Обязательная пагинация списка
Примеры URL при пагинации и фильтрации:
localhost/?page=1 - также первая страница
localhost/?page=N - страница N
localhost/?tags=3fa85f64-5717-4562-b3fc-2c963f66afa6&tags=cdcf7916-4fce-441d-a65d-352fd92595b5&authorName=Василий Пупкин&sorting=CreateDesc&page=1
Для PHP уместно передавать множественные параметры через param[]=xxx, param[]=yyy, … 
localhost/?tags=&sorting=CreatedDesc
localhost/?onlyMyCommunities=true

.Net -  рассылка сообщений
Необходимо реализовать функционал отправки email-уведомлений студентам курса о скором начале курса (за 1 день до старта курса). При реализации данного функционала необходимо добиться отказоустойчивости (подумайте, как добиться того, чтобы уведомления не были утеряны и доставлены адресату при сбоях)
Рекомендуемые технологии:
Quartz.NET - для реализации фоновых задач (https://www.quartz-scheduler.net/)
MailDev - для тестирования функционала отправки email (https://github.com/maildev/maildev), либо может быть использован настоящий SMTP-сервер.
При выборе иных технологий рекомендуем проконсультироваться и утвердить их с преподавателями направления.

